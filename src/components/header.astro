---
import logo from '@/assets/logo.svg';
import Image from 'astro/components/Image.astro';
---

<header class='absolute top-0 left-0 z-20 w-full'>
    <div class='container mx-auto px-4'>
        <nav class='flex h-20 items-center justify-between sm:h-[95px]'>
            <div class='w-20 sm:w-24 md:w-[130px] lg:w-[150px]'>
                <Image src={logo} alt='logo' />
            </div>

            <!-- Navigation Menu -->
            <div
                class='hidden items-center space-x-4 lg:flex lg:space-x-6 xl:space-x-8'
            >
                <a
                    href='#how-it-works'
                    class='border-b-2 border-transparent pb-1 text-sm! font-semibold text-white uppercase hover:border-white xl:text-lg!'
                >
                    HOW IT WORKS
                </a>
                <a
                    href='#why-us'
                    class='border-b-2 border-transparent pb-1 text-sm! font-semibold text-white uppercase hover:border-white xl:text-lg!'
                >
                    WHY US
                </a>
                <a
                    href='#plans'
                    class='border-b-2 border-transparent pb-1 text-sm! font-semibold text-white uppercase hover:border-white xl:text-lg!'
                >
                    PLANS
                </a>
                <a
                    href='#faq'
                    class='border-b-2 border-transparent pb-1 text-sm! font-semibold text-white uppercase hover:border-white xl:text-lg!'
                >
                    FAQ
                </a>
                <!-- CTA Button -->
                <div class='hidden md:block'>
                    <button
                        class='header-consultation-btn border-primary text-primary hover:bg-primary rounded-lg border-2 bg-white px-6 py-3 font-bold uppercase transition-all hover:text-white focus:ring-2 focus:ring-white focus:outline-none lg:px-8 lg:py-4 lg:text-lg'
                    >
                        FREE CONSULTATION
                    </button>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <div class='lg:hidden'>
                <button class='p-2 text-white' id='mobile-menu-button'>
                    <svg
                        class='h-6 w-6'
                        fill='none'
                        stroke='currentColor'
                        viewBox='0 0 24 24'
                    >
                        <path
                            stroke-linecap='round'
                            stroke-linejoin='round'
                            stroke-width='2'
                            d='M4 6h16M4 12h16M4 18h16'></path>
                    </svg>
                </button>
            </div>
        </nav>

        <!-- Mobile Menu Overlay -->
        <div
            class='fixed inset-0 z-40 hidden bg-black/50 lg:hidden'
            id='mobile-menu-overlay'
        >
        </div>

        <!-- Mobile Menu Slider -->
        <div
            class='bg-primary fixed top-0 right-0 z-50 h-full w-full max-w-screen translate-x-full transform transition-transform duration-300 ease-in-out sm:max-w-[400px] lg:hidden'
            id='mobile-menu'
        >
            <!-- Close Button -->
            <div class='flex justify-end p-4'>
                <button
                    class='rounded-lg p-2 text-white transition-colors hover:bg-white/10'
                    id='mobile-menu-close'
                >
                    <svg
                        class='h-6 w-6'
                        fill='none'
                        stroke='currentColor'
                        viewBox='0 0 24 24'
                    >
                        <path
                            stroke-linecap='round'
                            stroke-linejoin='round'
                            stroke-width='2'
                            d='M6 18L18 6M6 6l12 12'></path>
                    </svg>
                </button>
            </div>

            <!-- Navigation Links -->
            <div class='px-6 pb-6'>
                <nav class='space-y-6'>
                    <a
                        href='#'
                        class='block border-b-2 border-transparent pb-2 text-lg font-semibold text-white uppercase transition-all hover:border-white'
                    >
                        HOME
                    </a>
                    <a
                        href='#how-it-works'
                        class='block border-b-2 border-transparent pb-2 text-lg font-semibold text-white uppercase transition-all hover:border-white'
                    >
                        HOW IT WORKS
                    </a>
                    <a
                        href='#why-us'
                        class='block border-b-2 border-transparent pb-2 text-lg font-semibold text-white uppercase transition-all hover:border-white'
                    >
                        WHY US
                    </a>
                    <a
                        href='#plans'
                        class='block border-b-2 border-transparent pb-2 text-lg font-semibold text-white uppercase transition-all hover:border-white'
                    >
                        PLANS
                    </a>
                    <a
                        href='#faq'
                        class='block border-b-2 border-transparent pb-2 text-lg font-semibold text-white uppercase transition-all hover:border-white'
                    >
                        FAQ
                    </a>
                </nav>

                <!-- CTA Button -->
                <div class='pt-8'>
                    <button
                        class='header-consultation-btn border-primary text-primary hover:bg-primary w-full rounded-lg border-2 bg-white px-8 py-4 font-bold uppercase transition-all hover:text-white focus:ring-2 focus:ring-white focus:outline-none md:px-10 lg:py-5 lg:text-xl'
                    >
                        FREE CONSULTATION
                    </button>
                </div>
            </div>
        </div>
    </div>
</header>

<script>
    // Mobile menu toggle functionality
    document.addEventListener('DOMContentLoaded', function () {
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuOverlay = document.getElementById(
            'mobile-menu-overlay',
        );
        const mobileMenuClose = document.getElementById('mobile-menu-close');

        function openMobileMenu() {
            if (mobileMenuOverlay) mobileMenuOverlay.classList.remove('hidden');
            if (mobileMenu) mobileMenu.classList.remove('translate-x-full');
            // Prevent body scroll when menu is open
            document.body.style.overflow = 'hidden';
        }

        function closeMobileMenu() {
            if (mobileMenu) mobileMenu.classList.add('translate-x-full');
            if (mobileMenuOverlay) mobileMenuOverlay.classList.add('hidden');
            // Restore body scroll
            document.body.style.overflow = '';
        }

        // Contact modal triggers
        const consultationBtns = document.querySelectorAll(
            '.header-consultation-btn',
        );
        consultationBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                document.dispatchEvent(new CustomEvent('openContactModal'));
                // Close mobile menu if open
                closeMobileMenu();
            });
        });

        // Open menu
        if (mobileMenuButton) {
            mobileMenuButton.addEventListener('click', openMobileMenu);
        }

        // Close menu
        if (mobileMenuClose) {
            mobileMenuClose.addEventListener('click', closeMobileMenu);
        }

        // Close menu when clicking overlay
        if (mobileMenuOverlay) {
            mobileMenuOverlay.addEventListener('click', closeMobileMenu);
        }

        // Close menu when pressing Escape key
        document.addEventListener('keydown', function (event) {
            if (
                event.key === 'Escape' &&
                mobileMenu &&
                !mobileMenu.classList.contains('translate-x-full')
            ) {
                closeMobileMenu();
            }
        });

        // Close menu when clicking on navigation links
        if (mobileMenu) {
            const mobileNavLinks = mobileMenu.querySelectorAll('nav a');
            mobileNavLinks.forEach(link => {
                link.addEventListener('click', closeMobileMenu);
            });
        }
    });
</script>
